---
layout  : wiki
title   : '[WIP] ehcache, spring에 적용하는 법 알아보기' 
slug : '/ehcache-basics'
date    : 2022-02-06 13:45:08 +09:00
updated : 2022-02-06 23:00:23
tags    : 
- Spring
- Cache
---

## 서론 

스프링에서 로컬 캐시를 적용할 때 항상 나오는 그 이름.. ehcache.. 코드로 먼저 접하다보니, 영문도 모르고 `ehcache.xml` 설정을 보고 대충 TTL 이 이정도인 로컬캐시구나? 정도로 이해하곤 했다. 언제까지 그럴순없지. 오늘은 스프링 프로젝트에서 ehcache 를 적용하는 방법을 알아본다. 

## cache? 
ehcache 공홈의 [설명](https://www.ehcache.org/generated/2.10.0/html/ehc-all/#page/Ehcache_Documentation_Set%2Fco-cache_basic_terms.html%23) 을 인용한다. 
> 나중에 금방 필요하게 되어, 빨리 조회할 필요가 있는 것들을 저장하는 곳
>  a store of things that will be required in the future, and can be retrieved rapidly

cache는, 실제로 데이터가 기록되어 있는 곳에 직접 찾아가 데이터를 가져오는 것이 불편하니 자주 쓰는 것들은 금방 꺼내쓰도록 하는 저장소다. 책장이 있지만, 자주 보는 책들은  책상에 쌓아두는 것처럼. 어떤 정보가 필요하면, 어플리케이션은 cache를 먼저 들여다보게 된다. 그리고 cache에 있다면, 그 정보를 반환한다. (= cache hit)  없다면(=cache miss), 원래 정보가 있을 것으로 추정되는 (=System-of-Record)으로 가야한다. 

이렇게 하는 이유는 주로 성능 때문이다. 캐시로 

## ehcache ? 
ehcache 홈페이지에 들어가면 대문짝만하게 적혀있는 문구가 눈에 띈다. `JAVA-에서-젤-많이-쓰는-캐시` 그렇군요... 그렇지만 저는 거의 초면이니까 설명 좀 읽어보도록하겠습니다.

ehcache는 성능 향상, DB 의 부담 경감, 확장성에 방점을 찍고 나온 오픈소스 cache 구현체다. 가장 최근에 릴리즈된 버전은 `ehcache 3`으로, [여기](https://www.ehcache.org/documentation/3.0/) 에서 그 스펙을 확인할 수 있다. ehcache3는 JSR107 (JCache Spec) 으로 컴파일된다.

### 잠깐! 나 JCache도 몰라 
자주 참고하게 되는 baeldun 블로그에서는 [JCache](https://www.javadoc.io/doc/javax.cache/cache-api/1.0.0/index.html) 는 자바의 표준 캐시 API 라고 요약한다. 주요한 컴포넌트로는 `Cache` 가 있고, 당연히 이 하위에는 Cache 를 넣고 빼는 메소드들이 있다. 

gradle에서는 다음과 같이 임포트할 수 있다.
```groovy
implementation 'javax.cache:cache-api:1.1.0'
```

아직 ehcache2 를 자세히 살펴보지는 않았으나, 홈페이지의 뉘앙스로 봐서는 이전의 ehcache2 가 JCache와 별도로 진행되는 캐시로서 역할하고 있었고, ehcache3 로 오면서 JCache의 스펙을 구현한 형식으로 

 


## 스프링에 적용하기 

## 참고 

https://www.ehcache.org/

https://www.baeldung.com/jcache
